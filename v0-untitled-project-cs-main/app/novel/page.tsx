"use client"

import { useState } from "react"
import Link from "next/link"
import Image from "next/image"
import { ArrowLeft, ArrowRight, Home } from "lucide-react"
import { AnimatePresence, motion } from "framer-motion"

const chapters = [
  {
    id: 1,
    title: "الفصل الأول: لماذا كل هذا الضجيج؟",
    image: "/images/dark-landscape.jpg",
    content: `
      <p>جلست وحيدًا على رصيفٍ خشبي، تحيط بي مياه البحيرة الصامتة. كان الظلام الدافئ يحتويني بينما أضواء المدينة البعيدة تلمع فوقي بلا هوادة. كل ضجيج العالم بدا بعيدًا، لكن صدى الأسئلة في رأسي يعلو أكثر فأكثر. لماذا الآن؟ ولماذا بهذا القدر؟</p>
      <p>أدركتُ فجأة أن الضجيج لم يأتِ من الخارج، بل هو أزيزٌ مستمر في قلبي ورأسي. تتراكم الأسئلة كغيومٍ قاتمة؛ أتنفسُ بلا توقف لكن تلك الغيوم تتكاثر مع كل نبضة. أشعر بكل جزءٍ مني ينفرط حين أحاول التراجع. هل سأصمد حتى ينطفئ هذا الصخب؟</p>
      <p>لكن الحقيقة أنني لم أطلب حفلةً صاخبة في هذا الليل، ولم أعِد بشيءٍ كهذا. أضحكُ ساخراً من نفسي، كأنني بطل مسرحيةٍ لا أريد حضورها. لماذا تستمر الموسيقى حين أنا وحدي من يسمعها؟</p>
    `,
  },
  {
    id: 2,
    title: "الفصل الثاني: التمرد الصامت",
    image: "/images/silent-rebellion.jpg",
    content: `
      <p>هناك، في ركنٍ معتم من غرفتي، ضغطت بيدي على رأسي كأنني أحاول تثبيت مسامع غير صامتة. يحاول الخارج خنقي بالهدوء، لكن بداخلي كل شبر من قلبي أبطال حرب ضائع. حاولتُ إغلاق أذني عن الأصوات العالية في رأسي، لكنها تشقَّقت فوق كبدي كمدفعٍ لا يُطفئ. لم يكن هناك صوت سوى أنفاسي المتقطعة وضجيج الألم غير المرئي.</p>
      <p>تتمردُ الأفكار عليّ، تتقاذفني أوجاعها كما يلاطف السراب ماءه. نظرات العالم حولي صارت صورة باهتة على لوحةٍ فارغة؛ يظنونني على ما يرام بينما أنا أمزِّق قمصاني بصمت. أضحيت ممثلاً بارعاً في مسرحية حياتي، أبتسم بوجهٍ خاوٍ بينما روحٌ أخرى تنهش صدري في الخفاء.</p>
      <p>أتساءل: هل سيعرف أحدٌ يومًا مدى الصوت الذي يحملني داخلي؟ ربما يومًا ما سيتوقف العالم عن الضحك من كاهلي، ويسمع عزف حزني الداخلي.</p>
    `,
  },
  {
    id: 3,
    title: "الفصل الثالث: بين الحياة والموت",
    image: "/images/life-death.jpg",
    content: `
      <p>وجدت نفسي في محيطٍ من ضبابٍ خفيف وأطيافٍ من دخانٍ يلف وجهي. ومع ذلك كان هناك شعاع خافت يخترق الظلال. تساءلتُ: هل هو بصيص أمل في طريقي أم خديعةٌ سرعان ما تتلاشى؟</p>
      <p>تمزّقتُ داخليًا بين ألحانٍ بعثها الأمل وأخرى يرددها الخوف. أحد الأصوات همس لي: كن على قيد الحياة مهما طال الظلام، والآخر جاهدني: لماذا تصرّ على النور وأنت تلامس حافة العدم؟ كان صمتُ الليل شهيدًا على جدالي مع نفسي: أعنفها بلُطفٍ، وتختلق لي وعودًا بعيدة.</p>
      <p>أمسكتُ بفتاتٍ من الحياة وقدمي على حافة المجهول، أتشبَّث بعيشي بذرّةِ نورٍ خجول. وأنا على تلك الحافة أتساءل: أين سأجد راحتي؟ تحت أضواء الحياة الباهتة أم في حضن العدم الهادئ؟</p>
    `,
  },
  {
    id: 4,
    title: "الفصل الرابع: نهاية صامتة",
    image: "/images/silent-end.jpg",
    content: `
      <p>أمامي نفقٌ طويلٌ يلتهمه الظلام. لطيفٌ من زُرقةٍ باردة يغمر الجدران، كل خطوة أخطوها تئن تحت ثقل آخر نفسٍ في صدري. لن يعود أيُّ شيء: الأسماء في ذاكرتي انطفأت، والوجوه التي تعانقها أفكاري غابت رويدًا رويدًا. لم يبقَ سوى أنا وصمتٍ خانق وأنا أمضي في ظلّي نحو المجهول.</p>
      <p>في داخلي الآن غرفةُ صمتٍ عميق. كل نبضةٍ في قلبي أصبحت صرخةً متناهية في العدم. أحمل على كتفي أثقال العمر وقسوة الأيام التي مرت دون من يلاحظها. أمشي نحو اللحظة التي ستذوب فيها كل ذرات حياتي في لحن الصمت.</p>
      <p>كيف أقول وداعًا للعالم بينما أدرك أن الصوت الوحيد الذي يسمع لي هو الصمت؟ في تلك اللحظة أدركتُ أن حياتي كلها كانت صرخة أخيرة في الظلام. لقد كانت النهاية صامتة بلا وداع، وعندها فقط تحققت المقولة: عندما يصمت القلب، لا يبقى سوى ... اللاشيء.</p>
    `,
  },
  {
    id: 5,
    title: "الفصل الخامس: الأصداء",
    image: "/images/echoes.jpg",
    content: `
      <p>خرجت إلى المدينة الموحشة التي اعتبرتها في الأحلام. أضواء باهتة ترسم في الشوارع أشكالًا تشبه الظلال المتحركة. المشهد كله يبدو وكأنه صدى عنيف لمدينة أخرى، صدى عن عالمي الداخلي المكدود. وبينما أتقدم في الطريق الصامت تقريبًا، تلاحقني أصوات خافتة: همهمة غامضة تنبعث من الجدران المتهالكة، صدى ضحكات بعيدة تتلاشى كما لو كانت وسواسًا بعيدًا في الأرجاء.</p>
      <p>وقفت لأستمع. أصدائي الخاصة تتداخل مع هياكل المباني الرمادية؛ كل همسة لي تعود مضاعفة، تؤلمني قبل أن أفهم معناها. في زاوية الطريق، كان هناك طفلٌ بلا وجه ينظر إليّ، يحمل في يديه قيثارة مشققة. عزف على أوتار الهواء شجنًا قاسيًا، وكأن النوتات الموسيقية المنسكبة منه كانت أصداء لحياتي المبعثرة.</p>
      <p>«هل أستطيع الهروب من داخلي؟» سألته السماء من بعيد، وهو سؤال بلا إجابة، وكأنه أُلقي في فراغ الكون. لم يكن هناك صوت سوى الصدى؛ الصدى الذي كان يقابله جوابًا بثقة: «لا مهرب».</p>
    `,
  },
  {
    id: 6,
    title: "الفصل السادس: رقصة الضباب",
    image: "/images/fog-dance.jpg",
    content: `
      <p>لا أجد أي شيء في مدينتي أكثر غموضاً من الصباح المخملي الذي يغمر الممرات. تتدفق روائح الماضي في الهواء البارد، وتلوح في كل خطوة ظلال ضبابية ترقص أمام عيني. تتراقص الأضواء العائمة والمتلاشية أمامي كأنها أشباح مدعوة من قبل الريح لتلوي حولي وتهمس لي بأسرار لا أفهمها.</p>
      <p>وبينما أمشي، انتشرت رائحة زهرة برتقال ذابلة؛ خليط من الآمال المكسورة والرغبات المنسية. مررت بجدارٍ مزخرف، اكتشفت على سطحه كتاباً نصف مُدفون يحمل عنواناً قديمًا: «أوراق خاطئة للحياة». شعرت بأن لمسيته أشعل حكاية عتيقة بداخلي، حكاية تتنفس في نسائم الضباب.</p>
      <p>وفي لحظة غامضة، عندما بدا لي أن الضباب سيسحق كل إحساسي بالواقع، تلاشت الموسيقى وانطفأت الأنوار. غاب الزفير الأخير من شفاه المدينة العتيقة. بقيت وحيدًا في الظلام الرمادي، محاطًا بصمتٍ رهيب كجسدٍ هندسي زجاجي.</p>
    `,
  },
  {
    id: 7,
    title: "الفصل السابع: الوردة السوداء",
    image: "/images/black-rose.jpg",
    content: `
      <p>وجدت الوردة السوداء في يدي دون أن أعرف كيف وصلت إليها. نبضاتها كانت هادئة ومستقرة، رغم سوادها الذي يبتلعه الظلام من حولنا. بدأ زمن غامض يدور معنا. كانت الوردة كما لو أنها تحتضن كل ألوان الليل؛ بتلاتها الرقيقة تئن في صمت، تحمل شحنة دفينة من الضجر.</p>
      <p>وبينما هي في راحة يدي، تفتّحت سماء الرماد فوقنا. كانت الأنوار من حولنا تكاد تخبو، ورؤوسنا موجهة نحو الأعلى، نبحث عن ألوانٍ لم تعد موجودة في هذا الكون الرمادي. بدا أن الوردة تتنفس، ينبعث منها رائحة بعيدة وكأنها تختصر عبرة وحكاية.</p>
      <p>وقفت ثابتًا أحاول فهم هذه الرمزية. علمتني الوردة السوداء أن الجمال يمكن أن ينبثق من الظلام ذاته. كل ألمٍ داخلي يمكن أن يثمر في النهاية وردة نقشت على السلام.</p>
    `,
  },
  {
    id: 8,
    title: "الفصل الثامن: النهاية أم البداية؟",
    image: "/images/ending-beginning.jpg",
    content: `
      <p>نُشرت الرواية، وبدأت تصل إلى القراء. بدأت أتلقى رسائل من أصدقاء وغرباء، من أماكن مختلفة، يشاركونني قصصهم، تجاربهم، صراعاتهم مع الضجيج.</p>
      <p>أدركت أنني لست وحيدًا. أن هناك الكثيرين مثلي، يعانون من نفس الضجيج، يطرحون نفس الأسئلة، يبحثون عن نفس الإجابات.</p>
      <p>عدت إلى المقهى، حيث التقيت بها لأول مرة. كانت هناك، تقرأ نسخة من روايتي. ابتسمت عندما رأتني.</p>
      <p>"لقد فعلتها،" قالت، "لقد حولت الضجيج إلى كلمات."</p>
      <p>جلست معها، وتحدثنا عن الرواية، عن ردود الفعل، عن التأثير الذي أحدثته.</p>
      <p>"هل تعتقد أن هذه هي النهاية؟" سألتني.</p>
      <p>فكرت للحظة ثم أجبت: "لا، لا أعتقد ذلك. أعتقد أنها مجرد بداية. بداية لفهم جديد، لوعي جديد، لحياة جديدة."</p>
      <p>أومأت برأسها موافقة. "الحياة دائرية،" قالت، "كل نهاية هي بداية لشيء جديد."</p>
      <p>في تلك اللحظة، أدركت حقيقة مهمة: أن رحلتي مع الضجيج لم تنتهِ، لكنها تحوّلت. كنت قد شرعت للتو بأدوات جديدة للتعامل معه: الإدراك، الفهم، القبول.</p>
      <p>"لماذا كل هذا الضجيج؟" لم أعد أرى هذا السؤال كلغزًا يجب حله، بل دعوةً للبحث في الذات، لاكتشاف الحقائق المخفية، وللتصالح مع الماضي والحاضر والمستقبل.</p>
    `,
  },
]

export default function NovelPage() {
  const [currentChapter, setCurrentChapter] = useState(1)
  const chapter = chapters.find((c) => c.id === currentChapter) || chapters[0]

  const nextChapter = () => {
    if (currentChapter < chapters.length) {
      setCurrentChapter(currentChapter + 1)
      window.scrollTo(0, 0)
    }
  }

  const prevChapter = () => {
    if (currentChapter > 1) {
      setCurrentChapter(currentChapter - 1)
      window.scrollTo(0, 0)
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black text-gray-100 pb-20">
      <header className="sticky top-0 z-10 bg-black/80 backdrop-blur-sm border-b border-gray-800 p-4">
        <div className="max-w-4xl mx-auto flex justify-between items-center">
          <Link href="/" className="text-gray-300 hover:text-white transition-colors">
            <Home className="w-6 h-6" />
          </Link>
          <h1 className="text-xl font-bold text-center text-red-500">لماذا كل هذا الضجيج؟</h1>
          <div className="w-6"></div> {/* Spacer for centering */}
        </div>
      </header>

      <AnimatePresence mode="wait">
        <motion.div
          key={chapter.id}
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          exit={{ opacity: 0, y: -10 }}
          transition={{ duration: 0.4 }}
          className="max-w-4xl mx-auto p-4 md:p-8"
        >
          <div className="mb-8">
            <h2 className="text-2xl md:text-3xl font-bold text-red-500 mb-6">{chapter.title}</h2>

            <div className="relative w-full h-48 md:h-64 lg:h-80 mb-8 overflow-hidden rounded-lg">
              <Image
                src={chapter.image || "/placeholder.svg"}
                alt={chapter.title}
                fill
                className="object-cover"
                priority
              />
            </div>

            <div
              className="chapter-content text-lg leading-relaxed"
              dangerouslySetInnerHTML={{ __html: chapter.content }}
            />
          </div>

          <div className="flex justify-between mt-12">
            <button
              onClick={prevChapter}
              disabled={currentChapter === 1}
              className={`flex items-center space-x-2 rtl:space-x-reverse px-4 py-2 rounded-md transition-colors ${
                currentChapter === 1
                  ? "text-gray-600 cursor-not-allowed"
                  : "text-gray-300 hover:text-white hover:bg-gray-800"
              }`}
            >
              <ArrowRight className="w-5 h-5" />
              <span>السابق</span>
            </button>

            <div className="text-gray-400">
              {currentChapter} / {chapters.length}
            </div>

            <button
              onClick={nextChapter}
              disabled={currentChapter === chapters.length}
              className={`flex items-center space-x-2 rtl:space-x-reverse px-4 py-2 rounded-md transition-colors ${
                currentChapter === chapters.length
                  ? "text-gray-600 cursor-not-allowed"
                  : "text-gray-300 hover:text-white hover:bg-gray-800"
              }`}
            >
              <span>التالي</span>
              <ArrowLeft className="w-5 h-5" />
            </button>
          </div>
        </motion.div>
      </AnimatePresence>
    </div>
  )
}
